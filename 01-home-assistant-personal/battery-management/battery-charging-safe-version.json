[
    {
        "id": "7aa6bd9d6c51a86b",
        "type": "tab",
        "label": "æ™ºèƒ½å……é›»é›»æ± ç®¡ç†ç³»çµ± - å®‰å…¨åŠ å¼·ç‰ˆ",
        "disabled": false,
        "info": "æ™ºèƒ½å……é›»é›»æ± ç®¡ç†ç³»çµ± - å®‰å…¨åŠ å¼·ç‰ˆ\n\nðŸ›¡ï¸ å®‰å…¨æ”¹é€²ï¼š\n1. é›™é‡è¨ˆæ™‚å™¨ä¿è­·ç³»çµ±\n2. å®šæœŸå®‰å…¨æª¢æŸ¥ï¼ˆæ¯10åˆ†é˜ï¼‰\n3. åˆ†ç´šè­¦å ±ç³»çµ±ï¼ˆ50%è­¦å‘Šï¼Œ100%å¼·åˆ¶é—œé–‰ï¼‰\n4. æœ€å¤§å……é›»æ™‚é–“ç¡¬é™åˆ¶ï¼ˆè¨­å®šæ™‚é–“150%ï¼‰\n5. æŒä¹…åŒ–å……é›»è¨˜éŒ„\n6. ç·Šæ€¥é—œé–‰åŠŸèƒ½\n\nâš ï¸ é˜²æ­¢éŽåº¦å……é›»æŽªæ–½ï¼š\n- ä¸»è¨ˆæ™‚å™¨å¤±æ•ˆæ™‚ï¼Œå‚™ä»½æª¢æŸ¥æœƒæŽ¥ç®¡\n- å³ä½¿Node-REDé‡å•Ÿï¼Œä¹Ÿæœƒæ¢å¾©ä¿è­·\n- å……é›»æ™‚é–“è¶…éŽè¨­å®šå€¼50%æ™‚ç™¼å‡ºè­¦å‘Š\n- å……é›»æ™‚é–“è¶…éŽè¨­å®šå€¼100%æ™‚å¼·åˆ¶é—œé–‰\n\næ”¯æ´è¨­å‚™ï¼š\n- ç‰§ç”°BL1041B (switch.tp_link_power_strip_eb2f_cha_shang_4) - 90åˆ†é˜\n- ENELOOP 3è™Ÿ (switch.tp_link_power_strip_eb2f_cha_shang_5) - 240åˆ†é˜\n- ENELOOP 4è™Ÿ (switch.tp_link_power_strip_eb2f_cha_shang_6) - 210åˆ†é˜",
        "env": []
    },
    {
        "id": "emergency_stop_all",
        "type": "inject",
        "z": "7aa6bd9d6c51a86b",
        "name": "ðŸš¨ ç·Šæ€¥é—œé–‰æ‰€æœ‰å……é›»",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "emergency_stop",
        "payloadType": "str",
        "x": 130,
        "y": 20,
        "wires": [["emergency_stop_handler"]]
    },
    {
        "id": "emergency_stop_handler",
        "type": "function",
        "z": "7aa6bd9d6c51a86b",
        "name": "ç·Šæ€¥é—œé–‰è™•ç†å™¨",
        "func": "// ç²å–é›»æ± é…ç½®\nconst batteries = {\n    makita: {\n        entityId: 'switch.tp_link_power_strip_eb2f_cha_shang_4',\n        name: 'ç‰§ç”°BL1041Bå……é›»é›»æ± '\n    },\n    eneloop_aa: {\n        entityId: 'switch.tp_link_power_strip_eb2f_cha_shang_5',\n        name: 'ENELOOP 3è™Ÿå……é›»é›»æ± '\n    },\n    eneloop_aaa: {\n        entityId: 'switch.tp_link_power_strip_eb2f_cha_shang_6',\n        name: 'ENELOOP 4è™Ÿå……é›»é›»æ± '\n    }\n};\n\n// æ¸…é™¤æ‰€æœ‰è¨ˆæ™‚å™¨\nfor (const key of Object.keys(batteries)) {\n    const timerId = flow.get(`${key}_timer`);\n    if (timerId) {\n        clearTimeout(timerId);\n        flow.set(`${key}_timer`, null);\n    }\n    \n    // æ¸…é™¤å……é›»è¨˜éŒ„\n    context.set(`${key}_charging`, null);\n}\n\n// æº–å‚™é—œé–‰æ‰€æœ‰è¨­å‚™çš„å‘½ä»¤\nconst outputs = [];\nlet deviceList = [];\n\nfor (const [key, battery] of Object.entries(batteries)) {\n    outputs.push({\n        payload: {\n            domain: 'switch',\n            service: 'turn_off',\n            target: {\n                entity_id: battery.entityId\n            }\n        },\n        batteryKey: key,\n        action: 'emergency_stop'\n    });\n    deviceList.push(battery.name);\n}\n\n// æº–å‚™ç·Šæ€¥é€šçŸ¥\nconst notifyMsg = {\n    payload: {\n        title: 'ðŸš¨ ç·Šæ€¥é—œé–‰å……é›»',\n        message: `ðŸš¨ å·²åŸ·è¡Œç·Šæ€¥é—œé–‰æ‰€æœ‰å……é›»è¨­å‚™\\n\\né—œé–‰è¨­å‚™ï¼š\\n${deviceList.map(name => `â€¢ ${name}`).join('\\n')}\\n\\nâ° åŸ·è¡Œæ™‚é–“ï¼š${new Date().toLocaleString('zh-TW')}\\n\\nè«‹æª¢æŸ¥è¨­å‚™ç‹€æ…‹å’Œé›»æ± æº«åº¦ã€‚`\n    },\n    action: 'emergency_stop'\n};\n\noutputs.unshift(notifyMsg); // é€šçŸ¥æ”¾åœ¨ç¬¬ä¸€å€‹è¼¸å‡º\n\nnode.status({fill:\"red\", shape:\"dot\", text:\"ç·Šæ€¥é—œé–‰åŸ·è¡Œä¸­\"});\n\nreturn outputs;",
        "outputs": 4,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 20,
        "wires": [["notify_splitter"], ["device_control"], ["device_control"], ["device_control"]]
    },
    {
        "id": "safety_check_timer",
        "type": "inject",
        "z": "7aa6bd9d6c51a86b",
        "name": "ðŸ” å®‰å…¨æª¢æŸ¥ï¼ˆæ¯10åˆ†é˜ï¼‰",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": true,
        "onceDelay": 60,
        "topic": "",
        "payload": "safety_check",
        "payloadType": "str",
        "x": 140,
        "y": 80,
        "wires": [["safety_check_handler"]]
    },
    {
        "id": "safety_check_handler",
        "type": "function",
        "z": "7aa6bd9d6c51a86b",
        "name": "å®‰å…¨æª¢æŸ¥è™•ç†å™¨",
        "func": "// é›»æ± é…ç½®\nconst batteries = {\n    makita: {\n        entityId: 'switch.tp_link_power_strip_eb2f_cha_shang_4',\n        name: 'ç‰§ç”°BL1041Bå……é›»é›»æ± ',\n        chargingTime: 90,\n        domain: 'switch'\n    },\n    eneloop_aa: {\n        entityId: 'switch.tp_link_power_strip_eb2f_cha_shang_5',\n        name: 'ENELOOP 3è™Ÿå……é›»é›»æ± ',\n        chargingTime: 240,\n        domain: 'switch'\n    },\n    eneloop_aaa: {\n        entityId: 'switch.tp_link_power_strip_eb2f_cha_shang_6',\n        name: 'ENELOOP 4è™Ÿå……é›»é›»æ± ',\n        chargingTime: 210,\n        domain: 'switch'\n    }\n};\n\nconst now = Date.now();\nconst outputs = [null, null, null]; // [é€šçŸ¥, æŽ§åˆ¶, debug]\nlet warnings = [];\nlet emergencyStops = [];\n\n// æª¢æŸ¥æ¯å€‹é›»æ± çš„å……é›»ç‹€æ…‹\nfor (const [key, battery] of Object.entries(batteries)) {\n    const chargingInfo = context.get(`${key}_charging`);\n    \n    if (chargingInfo && chargingInfo.startTime) {\n        const chargingMinutes = Math.round((now - chargingInfo.startTime) / 60000);\n        const maxTime = battery.chargingTime;\n        const warningTime = Math.round(maxTime * 1.5); // 150%è­¦å‘Š\n        const emergencyTime = Math.round(maxTime * 2.0); // 200%ç·Šæ€¥é—œé–‰\n        \n        if (chargingMinutes >= emergencyTime) {\n            // ç·Šæ€¥é—œé–‰\n            emergencyStops.push({\n                battery: battery,\n                key: key,\n                chargingMinutes: chargingMinutes,\n                maxTime: maxTime\n            });\n        } else if (chargingMinutes >= warningTime) {\n            // è­¦å‘Š\n            warnings.push({\n                battery: battery,\n                key: key,\n                chargingMinutes: chargingMinutes,\n                maxTime: maxTime\n            });\n        }\n    }\n}\n\n// è™•ç†ç·Šæ€¥é—œé–‰\nif (emergencyStops.length > 0) {\n    const stopList = emergencyStops.map(item => \n        `â€¢ ${item.battery.name}: ${item.chargingMinutes}åˆ†é˜ (è¶…éŽ${item.maxTime}åˆ†é˜${Math.round((item.chargingMinutes/item.maxTime-1)*100)}%)`\n    ).join('\\n');\n    \n    // æº–å‚™ç·Šæ€¥é—œé–‰é€šçŸ¥\n    outputs[0] = {\n        payload: {\n            title: 'ðŸš¨ ç·Šæ€¥é—œé–‰éŽåº¦å……é›»',\n            message: `ðŸš¨ æª¢æ¸¬åˆ°åš´é‡éŽåº¦å……é›»ï¼Œç«‹å³é—œé–‰ï¼š\\n${stopList}\\n\\nâš ï¸ è«‹æª¢æŸ¥é›»æ± å’Œå……é›»å™¨ç‹€æ…‹\\nðŸ• æª¢æŸ¥æ™‚é–“ï¼š${new Date().toLocaleString('zh-TW')}`\n        },\n        action: 'emergency_safety_stop'\n    };\n    \n    // æº–å‚™é—œé–‰å‘½ä»¤\n    const firstStop = emergencyStops[0];\n    outputs[1] = {\n        payload: {\n            domain: firstStop.battery.domain,\n            service: 'turn_off',\n            target: {\n                entity_id: firstStop.battery.entityId\n            }\n        },\n        batteryKey: firstStop.key,\n        action: 'emergency_safety_stop'\n    };\n    \n    // æ¸…é™¤å……é›»è¨˜éŒ„\n    emergencyStops.forEach(item => {\n        context.set(`${item.key}_charging`, null);\n        const timerId = flow.get(`${item.key}_timer`);\n        if (timerId) {\n            clearTimeout(timerId);\n            flow.set(`${item.key}_timer`, null);\n        }\n    });\n}\n\n// è™•ç†è­¦å‘Š\nelse if (warnings.length > 0) {\n    const warnList = warnings.map(item => \n        `â€¢ ${item.battery.name}: ${item.chargingMinutes}åˆ†é˜ (è¨­å®š${item.maxTime}åˆ†é˜)`\n    ).join('\\n');\n    \n    outputs[0] = {\n        payload: {\n            title: 'âš ï¸ å……é›»æ™‚é–“è­¦å‘Š',\n            message: `âš ï¸ ä»¥ä¸‹é›»æ± å……é›»æ™‚é–“è¶…éŽè¨­å®šå€¼50%ï¼š\\n${warnList}\\n\\nå»ºè­°æª¢æŸ¥å……é›»ç‹€æ…‹\\nðŸ• æª¢æŸ¥æ™‚é–“ï¼š${new Date().toLocaleString('zh-TW')}`\n        },\n        action: 'charging_warning'\n    };\n}\n\n// Debugè¼¸å‡º\noutputs[2] = {\n    payload: 'å®‰å…¨æª¢æŸ¥å®Œæˆ',\n    warnings: warnings.length,\n    emergencyStops: emergencyStops.length,\n    checkTime: new Date().toISOString()\n};\n\nnode.status({\n    fill: emergencyStops.length > 0 ? \"red\" : warnings.length > 0 ? \"yellow\" : \"green\",\n    shape: \"dot\",\n    text: `æª¢æŸ¥å®Œæˆ: ${warnings.length}è­¦å‘Š, ${emergencyStops.length}ç·Šæ€¥`\n});\n\nreturn outputs;",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 80,
        "wires": [["notify_splitter"], ["device_control"], ["debug_safety"]]
    },
    {
        "id": "enhanced_charging_handler",
        "type": "function",
        "z": "7aa6bd9d6c51a86b",
        "name": "å¢žå¼·å……é›»è™•ç†å™¨",
        "func": "// é›»æ± é…ç½®\nconst batteries = {\n    makita: {\n        entityId: 'switch.tp_link_power_strip_eb2f_cha_shang_4',\n        name: 'ç‰§ç”°BL1041Bå……é›»é›»æ± ',\n        chargingTime: 90,\n        maintenanceDays: 30,\n        domain: 'switch'\n    },\n    eneloop_aa: {\n        entityId: 'switch.tp_link_power_strip_eb2f_cha_shang_5',\n        name: 'ENELOOP 3è™Ÿå……é›»é›»æ± ',\n        chargingTime: 240,\n        maintenanceDays: 60,\n        domain: 'switch'\n    },\n    eneloop_aaa: {\n        entityId: 'switch.tp_link_power_strip_eb2f_cha_shang_6',\n        name: 'ENELOOP 4è™Ÿå……é›»é›»æ± ',\n        chargingTime: 210,\n        maintenanceDays: 60,\n        domain: 'switch'\n    }\n};\n\n// è§£æžç‹€æ…‹è®ŠåŒ–\nconst newState = msg.payload;\nconst oldState = msg.data.old_state?.state;\nconst entityId = msg.data.entity_id;\n\n// æ‰¾åˆ°å°æ‡‰çš„é›»æ± \nlet batteryKey = null;\nlet battery = null;\n\nfor (const [key, config] of Object.entries(batteries)) {\n    if (config.entityId === entityId) {\n        batteryKey = key;\n        battery = config;\n        break;\n    }\n}\n\nif (!battery) {\n    node.error(`æ‰¾ä¸åˆ°å¯¦é«” ${entityId} çš„é…ç½®`);\n    return null;\n}\n\nconst outputs = [null, null, null]; // [é€šçŸ¥, æŽ§åˆ¶, debug]\n\n// æª¢æŸ¥é–‹å•Ÿç‹€æ…‹ (off -> on)\nif (oldState === 'off' && newState === 'on') {\n    // æ¸…é™¤ç¾æœ‰è¨ˆæ™‚å™¨\n    const timerId = flow.get(`${batteryKey}_timer`);\n    if (timerId) {\n        clearTimeout(timerId);\n    }\n    \n    const startTime = Date.now();\n    \n    // ä½¿ç”¨contextå­˜å„²å……é›»ä¿¡æ¯ï¼ˆæŒä¹…åŒ–ï¼‰\n    context.set(`${batteryKey}_charging`, {\n        startTime: startTime,\n        entityId: entityId,\n        batteryName: battery.name,\n        maxTime: battery.chargingTime\n    });\n    \n    // æ›´æ–°å……é›»è¨˜éŒ„\n    const records = flow.get('chargingRecords') || {};\n    if (!records[batteryKey]) records[batteryKey] = {};\n    records[batteryKey].lastCharge = new Date(startTime).toISOString();\n    records[batteryKey].count = (records[batteryKey].count || 0) + 1;\n    flow.set('chargingRecords', records);\n    \n    // è¨­å®šä¸»è¨ˆæ™‚å™¨\n    const chargingMs = battery.chargingTime * 60 * 1000;\n    const newTimerId = setTimeout(() => {\n        // ä¸»è¨ˆæ™‚å™¨åˆ°æœŸï¼Œæ­£å¸¸é—œé–‰\n        const controlMsg = {\n            payload: {\n                domain: battery.domain,\n                service: 'turn_off',\n                target: {\n                    entity_id: entityId\n                }\n            },\n            batteryKey: batteryKey,\n            action: 'normal_stop'\n        };\n        \n        // æ¸…é™¤å……é›»è¨˜éŒ„\n        context.set(`${batteryKey}_charging`, null);\n        \n        node.send([null, controlMsg, {\n            payload: `æ­£å¸¸é—œé–‰ ${battery.name}`,\n            batteryKey: batteryKey,\n            action: 'normal_stop'\n        }]);\n        \n        flow.set(`${batteryKey}_timer`, null);\n    }, chargingMs);\n    \n    flow.set(`${batteryKey}_timer`, newTimerId);\n    \n    // è¨­å®šå®‰å…¨å‚™ä»½è¨ˆæ™‚å™¨ï¼ˆ150%æ™‚é–“ï¼‰\n    const safetyMs = Math.round(chargingMs * 1.5);\n    const safetyTimerId = setTimeout(() => {\n        // å®‰å…¨è¨ˆæ™‚å™¨åˆ°æœŸï¼Œå¼·åˆ¶é—œé–‰\n        const controlMsg = {\n            payload: {\n                domain: battery.domain,\n                service: 'turn_off',\n                target: {\n                    entity_id: entityId\n                }\n            },\n            batteryKey: batteryKey,\n            action: 'safety_stop'\n        };\n        \n        // æ¸…é™¤å……é›»è¨˜éŒ„\n        context.set(`${batteryKey}_charging`, null);\n        \n        // ç™¼é€å®‰å…¨é—œé–‰é€šçŸ¥\n        const safetyNotify = {\n            payload: {\n                title: 'ðŸ›¡ï¸ å®‰å…¨ä¿è­·é—œé–‰',\n                message: `ðŸ›¡ï¸ ${battery.name} å®‰å…¨ä¿è­·é—œé–‰\\nâ±ï¸ å……é›»æ™‚é–“ï¼š${Math.round(battery.chargingTime * 1.5)}åˆ†é˜\\nâš ï¸ ä¸»è¨ˆæ™‚å™¨å¯èƒ½å¤±æ•ˆï¼Œå·²å•Ÿå‹•å®‰å…¨ä¿è­·`\n            },\n            action: 'safety_stop'\n        };\n        \n        node.send([safetyNotify, controlMsg, {\n            payload: `å®‰å…¨é—œé–‰ ${battery.name}`,\n            batteryKey: batteryKey,\n            action: 'safety_stop'\n        }]);\n        \n        flow.set(`${batteryKey}_safety_timer`, null);\n    }, safetyMs);\n    \n    flow.set(`${batteryKey}_safety_timer`, safetyTimerId);\n    \n    // æº–å‚™é–‹å§‹é€šçŸ¥\n    const notifyMsg = {\n        payload: {\n            title: 'ðŸ”‹ å……é›»é–‹å§‹',\n            message: `ðŸ”‹ ${battery.name} é–‹å§‹å……é›»\\nâ±ï¸ é è¨ˆæ™‚é–“ï¼š${battery.chargingTime}åˆ†é˜\\nðŸ›¡ï¸ å®‰å…¨é™åˆ¶ï¼š${Math.round(battery.chargingTime * 1.5)}åˆ†é˜\\nðŸ• é–‹å§‹æ™‚é–“ï¼š${new Date(startTime).toLocaleString('zh-TW')}`\n        },\n        batteryKey: batteryKey,\n        action: 'start'\n    };\n    \n    outputs[0] = notifyMsg;\n    outputs[2] = {\n        payload: `${battery.name} é–‹å§‹å……é›»ï¼ˆå¢žå¼·ä¿è­·ï¼‰`,\n        batteryKey: batteryKey,\n        chargingTime: battery.chargingTime,\n        safetyTime: Math.round(battery.chargingTime * 1.5),\n        startTime: startTime\n    };\n}\n\n// æª¢æŸ¥é—œé–‰ç‹€æ…‹ (on -> off)\nelse if (newState === 'off' && oldState === 'on') {\n    // æ¸…é™¤æ‰€æœ‰è¨ˆæ™‚å™¨\n    const timerId = flow.get(`${batteryKey}_timer`);\n    const safetyTimerId = flow.get(`${batteryKey}_safety_timer`);\n    \n    if (timerId) {\n        clearTimeout(timerId);\n        flow.set(`${batteryKey}_timer`, null);\n    }\n    if (safetyTimerId) {\n        clearTimeout(safetyTimerId);\n        flow.set(`${batteryKey}_safety_timer`, null);\n    }\n    \n    // ç²å–å……é›»ä¿¡æ¯\n    const chargingInfo = context.get(`${batteryKey}_charging`);\n    let actualTime = 0;\n    \n    if (chargingInfo && chargingInfo.startTime) {\n        actualTime = Math.round((Date.now() - chargingInfo.startTime) / 60000);\n        context.set(`${batteryKey}_charging`, null); // æ¸…é™¤å……é›»è¨˜éŒ„\n    }\n    \n    // åˆ¤æ–·é—œé–‰åŽŸå› \n    let stopReason = 'æ‰‹å‹•é—œé–‰';\n    let statusIcon = 'âœ…';\n    \n    if (actualTime > battery.chargingTime * 1.2) {\n        stopReason = 'å»¶é²é—œé–‰';\n        statusIcon = 'âš ï¸';\n    }\n    \n    const notifyMsg = {\n        payload: {\n            title: `${statusIcon} å……é›»å®Œæˆ`,\n            message: `${statusIcon} ${battery.name} å……é›»å®Œæˆ\\nâ±ï¸ å……é›»æ™‚é•·ï¼š${actualTime}åˆ†é˜\\nðŸ“‹ è¨­å®šæ™‚é–“ï¼š${battery.chargingTime}åˆ†é˜\\nðŸ“Š æ•ˆçŽ‡ï¼š${actualTime > 0 ? Math.round((battery.chargingTime/actualTime)*100) : 0}%\\nðŸ• å®Œæˆæ™‚é–“ï¼š${new Date().toLocaleString('zh-TW')}\\n\\n${stopReason}`\n        },\n        batteryKey: batteryKey,\n        action: 'complete'\n    };\n    \n    outputs[0] = notifyMsg;\n    outputs[2] = {\n        payload: `${battery.name} å……é›»å®Œæˆ`,\n        batteryKey: batteryKey,\n        actualTime: actualTime,\n        expectedTime: battery.chargingTime,\n        stopReason: stopReason\n    };\n}\n\nreturn outputs;",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,\n        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 200,
        "wires": [["notify_splitter"], ["device_control"], ["debug_charging"]]
    },
    {
        "id": "notify_splitter",
        "type": "function",
        "z": "7aa6bd9d6c51a86b",
        "name": "é€šçŸ¥åˆ†ç™¼å™¨",
        "func": "// æª¢æŸ¥æ˜¯å¦æœ‰é€šçŸ¥è¨Šæ¯\nif (!msg || !msg.payload) {\n    return [null, null, null];\n}\n\n// å‹•æ…‹éœéŸ³æ™‚é–“æŽ§åˆ¶\nlet quietMode = flow.get('quietMode');\nif (quietMode === undefined) {\n    quietMode = false;\n    flow.set('quietMode', quietMode);\n}\n\nlet isQuiet = false;\nif (quietMode) {\n    const now = new Date();\n    const hour = now.getHours();\n    isQuiet = hour >= 22 || hour < 7;\n}\n\nif (isQuiet && msg.action !== 'error' && msg.action !== 'emergency_stop' && msg.action !== 'emergency_safety_stop') {\n    return [null, null, null];\n}\n\nconst title = msg.payload.title;\nconst message = msg.payload.message;\n\n// å‰µå»ºé€šçŸ¥è¨Šæ¯\nmsg.payload_notifyhelper = {\n    message: message,\n    title: title,\n    targets: ['person.ming']\n};\n\nconst notify1 = {\n    payload_notifyhelper: msg.payload_notifyhelper\n};\n\nconst notify2 = {\n    payload: {\n        title: title,\n        message: message\n    }\n};\n\nconst notify3 = {\n    payload: {\n        title: title,\n        message: message\n    }\n};\n\nreturn [notify1, notify2, notify3];",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 140,
        "wires": [["notify_helper"], ["synology_chat"], ["telegram_bot"]]
    },
    {
        "id": "notify_helper",
        "type": "api-call-service",
        "z": "7aa6bd9d6c51a86b",
        "name": "NotifyHelper (ming)",
        "server": "125d83f7.1a33dc",
        "version": 7,
        "debugenabled": false,
        "action": "notify.notify_person",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{\"message\": payload_notifyhelper.message, \"title\": payload_notifyhelper.title, \"targets\": payload_notifyhelper.targets}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "notify",
        "service": "notify_person",
        "x": 800,
        "y": 100,
        "wires": [["debug_notify1"]]
    },
    {
        "id": "125d83f7.1a33dc",
        "type": "server",
        "name": "Home Assistant",
        "addon": true
    }
]
